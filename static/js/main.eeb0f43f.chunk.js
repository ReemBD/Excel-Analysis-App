(this["webpackJsonpmy-food-analysis"]=this["webpackJsonpmy-food-analysis"]||[]).push([[0],{170:function(e,t){},181:function(e,t,c){},182:function(e,t,c){},183:function(e,t,c){},398:function(e,t){},399:function(e,t){},403:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c.n(n),r=c(171),s=c.n(r),l=(c(181),c(18)),i=(c.p,c(182),c(183),c(2)),o=c(58),u=function(){return Object(i.jsx)("header",{className:"app-header-container p-3",children:Object(i.jsxs)("div",{className:"flex justify-between items-center main-layout",children:[Object(i.jsx)("div",{className:"logo fg-2",children:"Mamush"}),Object(i.jsxs)("nav",{className:"main-nav fg-3",children:[Object(i.jsx)(o.b,{to:"/",className:"nav-link",children:"Home"}),Object(i.jsx)(o.b,{to:"/table",className:"nav-link",children:"Tables"}),Object(i.jsx)(o.b,{to:"/data",className:"nav-link",children:"Data"})]})]})})},j=a.a.memo(u),d=c(13),f=c(16),b=c(37),x={save:function(e,t){var c=JSON.stringify(t);localStorage.setItem(e,c)},load:function(e){return JSON.parse(localStorage.getItem(e))}};var h={storeToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0},getRandomInt:O,getRandomId:function(){var e=Date.now().toString(16),t=O(1e3,9999).toString(16),c=O(1e3,9999).toString(16);return"".concat(c,"-").concat(e,"-").concat(t).toUpperCase()},extractColumns:function(e){var t=new Set;return e.forEach((function(e){e.sheets.forEach((function(e){var c=e.rows;m.getHeaderCells(c[0]).forEach((function(e){t.add(e)}))}))})),Array.from(t)}};function O(e,t){var c=e>=t?e+1:t+1,n=e<=t?e:t;return Math.floor(Math.random()*(c-n))+n}var m={query:g,add:function(e){e._id=h.getRandomId(),e.addedAt=Date.now(),e.sheets.forEach((function(e){e.id=h.getRandomId()}));var t=g();return t.push(e),C(t),e},getById:function(e){return g().find((function(t){return t._id===e}))},getFilteredCells:function(e){var t,c=e.column,n=e.txt,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new RegExp(n),s=v.cellsByColMap,l=v.currSlice;if(c)t=s[c];else{t=[];var i=Object.values(s);i.forEach((function(e){var c;return(c=t).push.apply(c,Object(b.a)(e))}))}var o=l.idx*l.size,u=o+l.size;if(!t[o])return null;n&&(t=t.filter((function(e){return r.test(e.txt)})));N(a);var j=t.slice(o,t[u]?u:t.length);return j},createRowsByColMap:function(e){var t=v.cellsByColMap,c=e||g(),n={};c.forEach((function(e){e.sheets.forEach((function(e){var c=y(e.rows[0]);e.rows.forEach((function(e){for(var a=Object.values(e),r=0;r<a.length;r++){var s={txt:a[r]},l=t[c[r]];!n[s.txt]&&l?(t[c[r]].push(s),n[s.txt]=!0):l||(t[c[r]]=[s],n[s.txt]=!0)}}))}))}))},getHeaderCells:y},p="excels",v={filterBy:{column:"",txt:""},currSlice:{idx:0,size:50},cellsByColMap:{},cache:{}};function g(){return x.load(p)||[]}function y(e){var t=new RegExp("__EMPTY"),c=Object.keys(e);return t.test(c)?Object.values(e):c}function N(e){v.currSliceIdx=e}function C(e){return x.save(p,e),e}var S=c(173);var E=c.n(S)()({excelReducer:[function(e,t){switch(t.type){case"SET_EXCELS":return Object(l.a)(Object(l.a)({},e),{},{excels:t.excels});case"ADD_EXCEL":return Object(l.a)(Object(l.a)({},e),{},{excels:[].concat(Object(b.a)(e.excels),[t.excel])});default:return e}},{excels:null}]}),w=Object(f.a)(E,2),k=w[0],R=w[1],_=Object(n.createContext)(R),B=_.Provider,I=function(e){var t=e.children;console.log({rootReducer:k,initialStateCombined:R});var c=Object(n.useReducer)(k,R),a=Object(f.a)(c,2),r=a[0],s=a[1];return Object(i.jsx)(B,{value:{state:r,dispatch:s},children:t})},A=c(51),L=c(93),D=c(176),F=function(e){var t=e.onClick,c=e.icon,n=e.className,a=Object(D.a)(e,["onClick","icon","className"]);return Object(i.jsx)("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",color:"inherit"},children:Object(i.jsx)(c,Object(l.a)(Object(l.a)({},a),{},{className:"btn-action ".concat(n)}))})};function z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),c=Object(f.a)(t,2),a=c[0],r=c[1],s=function(){r(!a)},l=Object(L.a)((function(e){a&&r(!1)}));return[a,s,l]}var M=function(e){var t=e.className,c=e.children,n=e.title,a=z(!1),r=Object(f.a)(a,3),s=r[0],l=r[1],o=r[2];return Object(i.jsxs)("div",{ref:o,onClick:function(e){e.stopPropagation()},className:"default-actions-popover-container",children:[Object(i.jsx)(F,{icon:A.c,className:"btn-actions",onClick:l,size:30}),s&&Object(i.jsxs)("div",{className:"default-actions-popover ".concat(t),children:[Object(i.jsx)("h3",{className:"default-actions-popover-header",children:n}),Object(i.jsx)("ul",{className:"default-actions-popover-list clear-list",children:c})]})]})},T=Object(d.e)((function(e){var t=e.excel,c=e.history,a=t.filename,r=Object(n.useState)(!1),s=Object(f.a)(r,2);s[0],s[1];return Object(i.jsxs)("div",{className:"excel-preview cursor-pointer flex flex-col",onClick:function(){c.push("/excel/".concat(t._id))},children:[Object(i.jsxs)(M,{title:"Excel Actions",children:[Object(i.jsx)("li",{children:"Delete Excel"}),Object(i.jsx)("li",{children:"Change Name"})]}),Object(i.jsx)("div",{className:"preview-img-container flex-grow",children:Object(i.jsx)("img",{})}),Object(i.jsx)("h3",{className:"title py-2",children:a})]})})),H=c(124),J=c.n(H),P=function(){var e=Object(n.useContext)(_),t=e.dispatch,c=e.state;return Object(i.jsxs)("div",{className:"excel-add excel-preview",children:[Object(i.jsx)("label",{className:"upload-label font-sans flex justify-center cursor-pointer",htmlFor:"uploader",children:Object(i.jsx)(A.a,{size:40,className:" self-center"})}),Object(i.jsx)("input",{onChange:function(e){var n=e.target,a=n.files,r=n.value;if(/^([a-zA-Z\u0590-\u05fe0-9\s_\\.,\-:])+(.xls|.xlsx)$/.test(r.toLowerCase())&&void 0!==typeof FileReader){var s=new FileReader,l=/[ a-zA-Z\u0590-\u05fe0-9_]+?(?=\.)/;s.readAsBinaryString?(s.onload=function(e){var n=e.target.result,a=r.match(l)[0];!function(e){c.excelReducer.excels.some((function(t){return t.filename===e}))}(a);var s={sheets:function(e){var t=J.a.read(e,{type:"binary"}),c=t.Sheets;return t.SheetNames.map((function(e){return{name:e,rows:J.a.utils.sheet_to_row_object_array(c[e])}}))}(n),filename:a};m.add(s);t({type:"ADD_EXCEL",excel:s})},s.readAsBinaryString(a[0])):s.onload=function(e){s.readAsArrayBuffer(a[0])}}},hidden:!0,type:"file",id:"uploader"})]})},X=function(e){var t=e.excels;return Object(i.jsxs)("div",{className:"excel-list grid lg:grid-cols-6 sm:grid-cols-4 main-layout",children:[t.map((function(e){return Object(i.jsx)(T,{excel:e},e._id)})),Object(i.jsx)(P,{})]})},q=c(57),Z=c(175),U=c(174),Y={txt:""},$=a.a.forwardRef((function(e,t){var c=e.isOpen,a=Object(n.useState)(Y),r=Object(f.a)(a,2),s=r[0],o=r[1];return Object(i.jsxs)("div",{ref:t,className:"data-corr-modal ".concat(c&&"open"),children:[Object(i.jsx)("input",{type:"text",className:"default-input",value:s.txt,onChange:function(e){var t=e.target,c=t.name,n=t.value;o(Object(l.a)(Object(l.a)({},s),{},Object(q.a)({},c,n)))}}),Object(i.jsx)("h3",{children:"Hello from data corr modal"}),Object(i.jsx)("p",{children:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Pariatur dolorem veniam cupiditate labore at hic officia veritatis, placeat corporis totam!"})]})})),G=function(e){var t=e.className,c=e.children,n=z(),a=Object(f.a)(n,3),r=a[0],s=a[1],l=a[2];return Object(i.jsxs)("li",{className:"".concat(t),children:[Object(i.jsx)("div",{className:"text",children:c}),Object(i.jsx)(U.CopyToClipboard,{text:c,children:Object(i.jsx)(F,{icon:A.b,size:30,title:"Copy to Clipboard"})}),Object(i.jsxs)("div",{className:"data-corr",children:[Object(i.jsx)(F,{icon:Z.a,size:30,title:"Correlate Data",className:"btn-open-data-corr",onClick:function(){return s(!r)}}),Object(i.jsx)($,{isOpen:r,ref:l})]})]})},K=function(e){var t=e.filteredRes,c=e.onScrollEnd;return Object(i.jsx)("ul",{onScroll:c,className:"filtered-cells-list list-none flex flex-col items-start",children:t.map((function(e){return Object(i.jsxs)(G,{className:"filtered-cells-list-item p-3 text-left flex justify-between items-center",children:[" ",e.txt]},h.getRandomId())}))})},Q=a.a.memo(K),V=function(e){var t=e.excels,c=e.filterBy,n=e.handleChange;return Object(i.jsxs)("section",{className:"data-filter flex items-center justify-between data-grid-layout",children:[Object(i.jsx)("input",{type:"text",className:"search-input",name:"txt",value:c.txt,onChange:n,placeholder:"Search..."}),Object(i.jsxs)("select",{className:"col-filter",id:"colSearch",name:"column",value:c.column,onChange:n,children:[Object(i.jsx)("option",{value:"",children:"All"}),h.extractColumns(t).map((function(e){return Object(i.jsx)("option",{value:e,children:e},e)}))]})]})},W=function(e){var t=e.sheet.name;return Object(i.jsx)("div",{className:"sheet-preview cursor-pointer p-2 flex justify-between",children:Object(i.jsx)("span",{className:"sheet-name",children:t})})},ee=function(e){var t=e.sheets;return Object(i.jsx)("div",{className:"sheet-list flex flex-col",children:t.map((function(e){return Object(i.jsx)(W,{sheet:e},e.id)}))})},te=[{key:"akmlk4fr90ifrepfk",path:"/excel/:id",component:function(e){var t=e.match,c=Object(n.useState)(null),a=Object(f.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var e=t.params.id,c=m.getById(e);s(c)}),[]),r?Object(i.jsx)("div",{className:"excel-details main-layout",children:Object(i.jsx)(ee,{sheets:r.sheets})}):Object(i.jsx)("h1",{children:"Loading..."})}},{key:"cso49fpmn94jdslsn",path:"/data",component:function(){var e=Object(n.useContext)(_),t=e.state,c=e.dispatch,a=t.excelReducer.excels,r=Object(n.useState)({column:"",txt:""}),s=Object(f.a)(r,2),o=s[0],u=s[1],j=Object(n.useState)(null),d=Object(f.a)(j,2),x=d[0],h=d[1],O=Object(n.useState)(0),p=Object(f.a)(O,2),v=p[0],g=p[1],y=Object(n.useCallback)((function(e){var t=e.target;t.scrollTop+t.offsetHeight>=t.scrollHeight&&g(v+1)}),[]);return Object(n.useEffect)((function(){var e=a;e||(e=Object(b.a)(m.query()),c({type:"SET_EXCELS",excels:e})),m.createRowsByColMap(e)}),[]),Object(n.useEffect)((function(){var e=m.getFilteredCells(o);h(e)}),[o]),Object(n.useEffect)((function(){if(v){var e=m.getFilteredCells(o,v);e&&h([].concat(Object(b.a)(x),Object(b.a)(e)))}}),[v]),a?Object(i.jsxs)("div",{className:"data-page main-layout grid content-center justify-items-center",children:[Object(i.jsx)(V,{excels:a,filterBy:o,handleChange:function(e){var t=e.target,c=t.name,n=t.value;"column"===c&&g(0),u(Object(l.a)(Object(l.a)({},o),{},Object(q.a)({},c,n)))}}),Object(i.jsx)("section",{className:"search-results flex flex-col data-grid-layout",children:x&&Object(i.jsx)(Q,{filteredRes:x,onScrollEnd:y})})]}):Object(i.jsx)("h1",{children:"Loading..."})}},{key:"mk4lt090ap2",path:"/table/:id",component:function(e){var t=e.match,c=Object(n.useState)(null),a=Object(f.a)(c,2),r=a[0],s=a[1];if(Object(n.useEffect)((function(){var e=t.params.id,c=m.getById(e);s(c)}),[]),!r)return Object(i.jsx)("h1",{children:"Loading..."});return Object(i.jsx)("div",{className:"excel-table",children:function(){var e=r.excelRows,t=Object.keys(e[0]);return Object(i.jsxs)("table",{className:"main-layout",children:[Object(i.jsx)("tr",{className:"table-head",children:t.map((function(e){return Object(i.jsx)("th",{children:e},e)}))}),e.map((function(e){var t=Object.values(e);return Object(i.jsx)("tr",{children:t.map((function(e){return Object(i.jsx)("td",{children:e},e)}))})}))]})}()})}},{key:"23mkls0o4lz;",path:"/table",component:function(){var e=Object(n.useContext)(_),t=e.dispatch,c=e.state.excelReducer.excels;return Object(n.useEffect)((function(){var e=Object(b.a)(m.query());t({type:"SET_EXCELS",excels:e})}),[]),c?Object(i.jsx)("div",{className:"my-excels",children:Object(i.jsx)(X,{excels:c,addExcel:function(e){t({type:"ADD_EXCEL",excel:e})}})}):Object(i.jsx)("h1",{children:"Loading..."})}},{key:"alm23rsasfaw3",path:"/",component:function(){return Object(i.jsx)("div",{className:"food-analysis-app-page",children:Object(i.jsx)("h3",{children:"Hello from food analysis app"})})}}];var ce=function(){return Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(j,{}),te.map((function(e){return Object(i.jsx)(d.a,Object(l.a)({exact:!0},e))}))]})})},ne=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,404)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},ae=Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(I,{children:Object(i.jsx)(ce,{})})});s.a.render(ae,document.getElementById("root")),ne()}},[[403,1,2]]]);
//# sourceMappingURL=main.eeb0f43f.chunk.js.map